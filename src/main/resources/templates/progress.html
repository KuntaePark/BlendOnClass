<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragment/default}">
<head>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>
<th:block layout:fragment="css"></th:block>
<th:block layout:fragment="script">
    <script th:src="@{/javascript/progress.js}"></script>
</th:block>


<div layout:fragment="main" id="main">
    <h1>진도 설정 페이지</h1>
    <div>
        <select th:onchange="onSubjectChange([[${classroomId}]], this.value)">
            <option value="">과목 선택</option>
            <th:block th:with="SUBJECT=${T(com.blendonclass.constant.SUBJECT)}">
                <th:block th:each="subject : ${SUBJECT.values()}">
                    <option th:if="${subject != SUBJECT.HR}" th:value="${subject}" th:text="${subject.getSubject()}"></option>
                </th:block>
            </th:block>
        </select>
    </div>
    <div th:if="${subject != null}" id="progress-form" class="flex flex-col gap-2">
        <div th:if="${lessons != null}" class="flex flex-1 gap-2 overflow-x-auto">
            <button class="range-button w-10 h-10 flex-none border-2 rounded border-gray-400
                            hover:bg-gray-200"
                    type="button"
                    th:each="lesson : ${lessons}"
                    th:onclick="selectRange([[${lesson.lessonId}]])"
                    th:text="${lesson.lessonId}"
                    th:value="${lesson.lessonId}"></button>
        </div>
        <button id="submit-button" type="button" th:onclick="setProgress([[${classroomId}]])"
                class="px-2 py-2 border-1 rounded bg-gray-200 w-40" disabled>등록하기</button>
    </div>
    <p id="startId"></p>
    <p id="endId"></p>
</div>
</html>